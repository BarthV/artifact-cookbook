<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Top Level Namespace
  
    &mdash; Documentation by YARD 0.8.3
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo;
    
    
    <span class="title">Top Level Namespace</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Top Level Namespace
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
  
</dl>
<div class="clear"></div>





  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#artifact_location-instance_method" title="#artifact_location (instance method)">- (Object) <strong>artifact_location</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute artifact_location.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#artifact_root-instance_method" title="#artifact_root (instance method)">- (Object) <strong>artifact_root</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute artifact_root.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#artifact_version-instance_method" title="#artifact_version (instance method)">- (Object) <strong>artifact_version</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute artifact_version.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_path-instance_method" title="#current_path (instance method)">- (Object) <strong>current_path</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute current_path.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_release_path-instance_method" title="#current_release_path (instance method)">- (Object) <strong>current_release_path</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute current_release_path.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#manifest_file-instance_method" title="#manifest_file (instance method)">- (Object) <strong>manifest_file</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute manifest_file.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#previous_version_numbers-instance_method" title="#previous_version_numbers (instance method)">- (Object) <strong>previous_version_numbers</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute previous_version_numbers.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#previous_version_paths-instance_method" title="#previous_version_paths (instance method)">- (Object) <strong>previous_version_paths</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute previous_version_paths.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#release_path-instance_method" title="#release_path (instance method)">- (Object) <strong>release_path</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute release_path.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#shared_path-instance_method" title="#shared_path (instance method)">- (Object) <strong>shared_path</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute shared_path.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#version_container_path-instance_method" title="#version_container_path (instance method)">- (Object) <strong>version_container_path</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute version_container_path.
</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#artifact_filename-instance_method" title="#artifact_filename (instance method)">- (String) <strong>artifact_filename</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the filename of the artifact being installed when the LWRP is
called.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cached_tar_path-instance_method" title="#cached_tar_path (instance method)">- (String) <strong>cached_tar_path</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the file path to the cached artifact the resource is installing.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#copy_artifact-instance_method" title="#copy_artifact (instance method)">- (void) <strong>copy_artifact</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Copies the artifact from its cached path to its release path.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#current_symlink_changing%3F-instance_method" title="#current_symlink_changing? (instance method)">- (Boolean) <strong>current_symlink_changing?</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Checks the not-equality of the current_release_version against the version
of the currently configured resource.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#delete_previous_versions-instance_method" title="#delete_previous_versions (instance method)">- (type) <strong>delete_previous_versions</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Deletes released versions of the artifact when the number of  released
versions exceeds the :keep value.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#deploy%3F-instance_method" title="#deploy? (instance method)">- (Boolean) <strong>deploy?</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
The deploy instance variable.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#extract_artifact-instance_method" title="#extract_artifact (instance method)">- (void) <strong>extract_artifact</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Extracts the artifact defined in the resource call.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#from_http%3F-instance_method" title="#from_http? (instance method)">- (Boolean) <strong>from_http?</strong>(location) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns true when the artifact is believed to be from an http source.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#from_nexus%3F-instance_method" title="#from_nexus? (instance method)">- (Boolean) <strong>from_nexus?</strong>(location) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns true when the artifact is believed to be from a Nexus source.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#generate_manifest-instance_method" title="#generate_manifest (instance method)">- (Hash) <strong>generate_manifest</strong>(files_path) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Generates a manifest for all the files underneath the given files_path.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#get_current_release_path-instance_method" title="#get_current_release_path (instance method)">- (String) <strong>get_current_release_path</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
The file the current symlink points to.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#get_current_release_version-instance_method" title="#get_current_release_version (instance method)">- (String) <strong>get_current_release_version</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
The current version the current symlink points to.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#get_previous_version_numbers-instance_method" title="#get_previous_version_numbers (instance method)">- (Array) <strong>get_previous_version_numbers</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Convenience method for returning just the version numbers of  the currently
installed versions of the artifact.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#get_previous_version_paths-instance_method" title="#get_previous_version_paths (instance method)">- (Array) <strong>get_previous_version_paths</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Searches the releases directory and returns an Array of version folders.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#get_release_path-instance_method" title="#get_release_path (instance method)">- (String) <strong>get_release_path</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a path to the artifact being installed by the configured resource.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#has_manifest_changed%3F-instance_method" title="#has_manifest_changed? (instance method)">- (Boolean) <strong>has_manifest_changed?</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Loads the saved manifest.yaml file and generates a new, current manifest.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#latest%3F-instance_method" title="#latest? (instance method)">- (Boolean) <strong>latest?</strong>(version) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Convenience method for determining whether a String is
&#8220;latest&#8221;.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_current_resource-instance_method" title="#load_current_resource (instance method)">- (Object) <strong>load_current_resource</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#manifest_differences%3F-instance_method" title="#manifest_differences? (instance method)">- (Boolean) <strong>manifest_differences?</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Checks the various cases of whether an artifact has or has not been
installed.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#retrieve_artifact%21-instance_method" title="#retrieve_artifact! (instance method)">- (void) <strong>retrieve_artifact!</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Retrieves the configured artifact based on the artifact_location instance
variable.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#retrieve_from_http-instance_method" title="#retrieve_from_http (instance method)">- (void) <strong>retrieve_from_http</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Defines a resource call for downloading the remote artifact.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#retrieve_from_local-instance_method" title="#retrieve_from_local (instance method)">- (void) <strong>retrieve_from_local</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Defines a resource call for a file already on the file system.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#retrieve_from_nexus-instance_method" title="#retrieve_from_nexus (instance method)">- (void) <strong>retrieve_from_nexus</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Defines a ruby_block resource call to download an artifact from Nexus.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#run_proc-instance_method" title="#run_proc (instance method)">- (void) <strong>run_proc</strong>(name) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A wrapper that adds debug logging for running a recipe_eval on the 
numerous Proc attributes defined for this resource.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#setup_deploy_directories%21-instance_method" title="#setup_deploy_directories! (instance method)">- (void) <strong>setup_deploy_directories!</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Creates directories that are necessary for installing the artifact.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#setup_shared_directories%21-instance_method" title="#setup_shared_directories! (instance method)">- (void) <strong>setup_shared_directories!</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Creates directories that are defined in the shared_directories attribute of
the resource.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#symlink_it_up%21-instance_method" title="#symlink_it_up! (instance method)">- (void) <strong>symlink_it_up!</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Creates directories and symlinks as defined by the symlinks attribute of
the resource.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#write_manifest-instance_method" title="#write_manifest (instance method)">- (String) <strong>write_manifest</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Generates a manfiest Hash for the files under the release_path and writes a
YAML dump of the created Hash to manifest_file.
</p>
</div></span>
  
</li>

      
    </ul>
  


  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="artifact_location-instance_method">
  
    - (<tt>Object</tt>) <strong>artifact_location</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute artifact_location
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_artifact_location'>artifact_location</span>
  <span class='ivar'>@artifact_location</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="artifact_root-instance_method">
  
    - (<tt>Object</tt>) <strong>artifact_root</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute artifact_root
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 31</span>

<span class='kw'>def</span> <span class='id identifier rubyid_artifact_root'>artifact_root</span>
  <span class='ivar'>@artifact_root</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="artifact_version-instance_method">
  
    - (<tt>Object</tt>) <strong>artifact_version</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute artifact_version
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 37</span>

<span class='kw'>def</span> <span class='id identifier rubyid_artifact_version'>artifact_version</span>
  <span class='ivar'>@artifact_version</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="current_path-instance_method">
  
    - (<tt>Object</tt>) <strong>current_path</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute current_path
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 28</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_path'>current_path</span>
  <span class='ivar'>@current_path</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="current_release_path-instance_method">
  
    - (<tt>Object</tt>) <strong>current_release_path</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute current_release_path
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 30</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_release_path'>current_release_path</span>
  <span class='ivar'>@current_release_path</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="manifest_file-instance_method">
  
    - (<tt>Object</tt>) <strong>manifest_file</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute manifest_file
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 33</span>

<span class='kw'>def</span> <span class='id identifier rubyid_manifest_file'>manifest_file</span>
  <span class='ivar'>@manifest_file</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="previous_version_numbers-instance_method">
  
    - (<tt>Object</tt>) <strong>previous_version_numbers</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute previous_version_numbers
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 35</span>

<span class='kw'>def</span> <span class='id identifier rubyid_previous_version_numbers'>previous_version_numbers</span>
  <span class='ivar'>@previous_version_numbers</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="previous_version_paths-instance_method">
  
    - (<tt>Object</tt>) <strong>previous_version_paths</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute previous_version_paths
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 34</span>

<span class='kw'>def</span> <span class='id identifier rubyid_previous_version_paths'>previous_version_paths</span>
  <span class='ivar'>@previous_version_paths</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="release_path-instance_method">
  
    - (<tt>Object</tt>) <strong>release_path</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute release_path
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 27</span>

<span class='kw'>def</span> <span class='id identifier rubyid_release_path'>release_path</span>
  <span class='ivar'>@release_path</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="shared_path-instance_method">
  
    - (<tt>Object</tt>) <strong>shared_path</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute shared_path
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 29</span>

<span class='kw'>def</span> <span class='id identifier rubyid_shared_path'>shared_path</span>
  <span class='ivar'>@shared_path</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="version_container_path-instance_method">
  
    - (<tt>Object</tt>) <strong>version_container_path</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute version_container_path
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 32</span>

<span class='kw'>def</span> <span class='id identifier rubyid_version_container_path'>version_container_path</span>
  <span class='ivar'>@version_container_path</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="artifact_filename-instance_method">
  
    - (<tt>String</tt>) <strong>artifact_filename</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the filename of the artifact being installed when the LWRP is
called. Depending on how the resource is called in a recipe, the value
returned by this method will change. If from_nexus?, return the
concatination of &#8220;artifact_id-version.extension&#8221; otherwise
return the basename of where the artifact is located.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code">When: new_resource.artifact_location =&gt; &quot;com.artifact:my-artifact:1.0.0:tgz&quot;
  artifact_filename =&gt; &quot;my-artifact-1.0.0.tgz&quot;
When: new_resource.artifact_location =&gt; &quot;http://some-site.com/my-artifact.jar&quot;
  artifact_filename =&gt; &quot;my-artifact.jar&quot;</pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the artifacts filename
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205
206
207
208
209
210
211
212
213</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 203</span>

<span class='kw'>def</span> <span class='id identifier rubyid_artifact_filename'>artifact_filename</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_from_nexus?'>from_nexus?</span><span class='lparen'>(</span><span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_artifact_location'>artifact_location</span><span class='rparen'>)</span>    
    <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_artifact_id'>artifact_id</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_extension'>extension</span> <span class='op'>=</span> <span class='id identifier rubyid_artifact_location'>artifact_location</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_extension'>extension</span>
      <span class='id identifier rubyid_extension'>extension</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>jar</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_artifact_id'>artifact_id</span><span class='rbrace'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_version'>version</span><span class='rbrace'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_extension'>extension</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='id identifier rubyid_artifact_location'>artifact_location</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cached_tar_path-instance_method">
  
    - (<tt>String</tt>) <strong>cached_tar_path</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the file path to the cached artifact the resource is installing.
</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the path to the cached artifact
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


186
187
188</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 186</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cached_tar_path'>cached_tar_path</span>
  <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_version_container_path'>version_container_path</span><span class='comma'>,</span> <span class='id identifier rubyid_artifact_filename'>artifact_filename</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="copy_artifact-instance_method">
  
    - (<tt>void</tt>) <strong>copy_artifact</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>
Copies the artifact from its cached path to its release path. The cached
path is the configured Chef::Config[:file_cache_path]/artifact_deploys
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code">cp /tmp/vagrant-chef-1/artifact_deploys/artifact_test/1.0.0/my-artifact.zip /srv/artifact_test/releases/1.0.0</pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


173
174
175
176
177
178
179
180
181</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 173</span>

<span class='kw'>def</span> <span class='id identifier rubyid_copy_artifact'>copy_artifact</span>
  <span class='id identifier rubyid_recipe_eval'>recipe_eval</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_execute'>execute</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>copy artifact</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
      <span class='id identifier rubyid_command'>command</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cp </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cached_tar_path'>cached_tar_path</span><span class='rbrace'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_release_path'>release_path</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_user'>user</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span>
      <span class='id identifier rubyid_group'>group</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_symlink_changing?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>current_symlink_changing?</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Checks the not-equality of the current_release_version against the version
of the currently configured resource. Returns true when the current symlink
will be changed to a different release of the artifact at the end of the
resource call.
</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


342
343
344</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 342</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_symlink_changing?'>current_symlink_changing?</span>
  <span class='id identifier rubyid_get_current_release_version'>get_current_release_version</span> <span class='op'>!=</span> <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='id identifier rubyid_release_path'>release_path</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_previous_versions-instance_method">
  
    - (<tt>type</tt>) <strong>delete_previous_versions</strong>(options = {})  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Deletes released versions of the artifact when the number of  released
versions exceeds the :keep value.
</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:keep</span>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>
the number of releases to keep
</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>type</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 245</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_previous_versions'>delete_previous_versions</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_recipe_eval'>recipe_eval</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_ruby_block'>ruby_block</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>delete_previous_versions</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
      <span class='id identifier rubyid_block'>block</span> <span class='kw'>do</span>
        <span class='kw'>def</span> <span class='id identifier rubyid_delete_cached_files_for'>delete_cached_files_for</span><span class='lparen'>(</span><span class='id identifier rubyid_version'>version</span><span class='rparen'>)</span>
          <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_artifact_root'>artifact_root</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='rparen'>)</span>
        <span class='kw'>end</span>

        <span class='kw'>def</span> <span class='id identifier rubyid_delete_release_path_for'>delete_release_path_for</span><span class='lparen'>(</span><span class='id identifier rubyid_version'>version</span><span class='rparen'>)</span>
          <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_deploy_to'>deploy_to</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>releases</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='rparen'>)</span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_keep'>keep</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:keep</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span>
        <span class='id identifier rubyid_delete_first'>delete_first</span> <span class='op'>=</span> <span class='id identifier rubyid_total'>total</span> <span class='op'>=</span> <span class='id identifier rubyid_previous_version_paths'>previous_version_paths</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_total'>total</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>||</span> <span class='id identifier rubyid_total'>total</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_keep'>keep</span>
          <span class='kw'>true</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_delete_first'>delete_first</span> <span class='op'>-=</span> <span class='id identifier rubyid_keep'>keep</span>

          <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[delete_previous_versions] is deleting </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_delete_first'>delete_first</span><span class='rbrace'>}</span><span class='tstring_content'> of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_total'>total</span><span class='rbrace'>}</span><span class='tstring_content'> old versions (keeping: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_keep'>keep</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>

          <span class='id identifier rubyid_to_delete'>to_delete</span> <span class='op'>=</span> <span class='id identifier rubyid_previous_version_paths'>previous_version_paths</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span><span class='lparen'>(</span><span class='id identifier rubyid_delete_first'>delete_first</span><span class='rparen'>)</span>

          <span class='id identifier rubyid_to_delete'>to_delete</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_version'>version</span><span class='op'>|</span>
            <span class='id identifier rubyid_delete_cached_files_for'>delete_cached_files_for</span><span class='lparen'>(</span><span class='id identifier rubyid_version'>version</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_delete_release_path_for'>delete_release_path_for</span><span class='lparen'>(</span><span class='id identifier rubyid_version'>version</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='rparen'>)</span>
            <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[delete_previous_versions] </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_version'>version</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='rbrace'>}</span><span class='tstring_content'> deleted</span><span class='tstring_end'>&quot;</span></span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="deploy?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>deploy?</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
The deploy instance variable
</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the deploy instance variable
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


347
348
349</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 347</span>

<span class='kw'>def</span> <span class='id identifier rubyid_deploy?'>deploy?</span>
  <span class='ivar'>@deploy</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="extract_artifact-instance_method">
  
    - (<tt>void</tt>) <strong>extract_artifact</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>
Extracts the artifact defined in the resource call. Handles a variety of
&#8216;tar&#8217; based files (tar.gz, tgz, tar, tar.bz2, tbz) and a few
&#8216;zip&#8217; based files (zip, war, jar).
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 144</span>

<span class='kw'>def</span> <span class='id identifier rubyid_extract_artifact'>extract_artifact</span>
  <span class='id identifier rubyid_recipe_eval'>recipe_eval</span> <span class='kw'>do</span>
    <span class='kw'>case</span> <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_extname'>extname</span><span class='lparen'>(</span><span class='id identifier rubyid_cached_tar_path'>cached_tar_path</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>tar.gz|tgz|tar|tar.bz2|tbz</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_execute'>execute</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>extract_artifact</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
        <span class='id identifier rubyid_command'>command</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tar xf </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cached_tar_path'>cached_tar_path</span><span class='rbrace'>}</span><span class='tstring_content'> -C </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_release_path'>release_path</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_user'>user</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span>
        <span class='id identifier rubyid_group'>group</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span>
      <span class='kw'>end</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>zip|war|jar</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_package'>package</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unzip</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_execute'>execute</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>extract_artifact</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
        <span class='id identifier rubyid_command'>command</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unzip -q -u -o </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cached_tar_path'>cached_tar_path</span><span class='rbrace'>}</span><span class='tstring_content'> -d </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_release_path'>release_path</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_user'>user</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span>
        <span class='id identifier rubyid_group'>group</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Application</span><span class='period'>.</span><span class='id identifier rubyid_fatal!'>fatal!</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot extract artifact because of its extension. Supported types are</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="from_http?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>from_http?</strong>(location)  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns true when the artifact is believed to be from an http source.
</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>location</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the artifact_location
</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
true when the location matches http or https.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


480
481
482</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 480</span>

<span class='kw'>def</span> <span class='id identifier rubyid_from_http?'>from_http?</span><span class='lparen'>(</span><span class='id identifier rubyid_location'>location</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_location'>location</span> <span class='op'>=~</span> <span class='const'>URI</span><span class='op'>::</span><span class='id identifier rubyid_regexp'>regexp</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>http</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>https</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="from_nexus?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>from_nexus?</strong>(location)  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns true when the artifact is believed to be from a Nexus source.
</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>location</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the artifact_location
</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
true when the location is a colon-separated value
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


490
491
492</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 490</span>

<span class='kw'>def</span> <span class='id identifier rubyid_from_nexus?'>from_nexus?</span><span class='lparen'>(</span><span class='id identifier rubyid_location'>location</span><span class='rparen'>)</span>
  <span class='op'>!</span><span class='id identifier rubyid_from_http?'>from_http?</span><span class='lparen'>(</span><span class='id identifier rubyid_location'>location</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_location'>location</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>2</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generate_manifest-instance_method">
  
    - (<tt>Hash</tt>) <strong>generate_manifest</strong>(files_path)  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Generates a manifest for all the files underneath the given files_path.
SHA1 digests will be generated for all files under the given files_path
with the exception of directories and the  manifest.yaml file itself.
</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>files_path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
a path to the files that a manfiest will be generated for
</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
a mapping of file_path => SHA1 of that file
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


552
553
554
555
556
557
558
559</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 552</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_manifest'>generate_manifest</span><span class='lparen'>(</span><span class='id identifier rubyid_files_path'>files_path</span><span class='rparen'>)</span>
  <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[generate_manifest] Generating manifest for files in </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_files_path'>files_path</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_files_in_release_path'>files_in_release_path</span> <span class='op'>=</span> <span class='const'>Dir</span><span class='lbracket'>[</span><span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_files_path'>files_path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>**/*</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span> <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_file'>file</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>manifest.yaml</span><span class='regexp_end'>/</span></span> <span class='rbrace'>}</span>

  <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_map'>map</span><span class='op'>|</span>
    <span class='id identifier rubyid_files_in_release_path'>files_in_release_path</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span> <span class='id identifier rubyid_map'>map</span><span class='lbracket'>[</span><span class='id identifier rubyid_file'>file</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA1</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_current_release_path-instance_method">
  
    - (<tt>String</tt>) <strong>get_current_release_path</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
The file the current symlink points to
</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the file the current symlink points to
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


352
353
354
355
356</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 352</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_current_release_path'>get_current_release_path</span>
  <span class='kw'>if</span> <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span><span class='lparen'>(</span><span class='id identifier rubyid_current_path'>current_path</span><span class='rparen'>)</span>
    <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_readlink'>readlink</span><span class='lparen'>(</span><span class='id identifier rubyid_current_path'>current_path</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_current_release_version-instance_method">
  
    - (<tt>String</tt>) <strong>get_current_release_version</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
The current version the current symlink points to
</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the current version the current symlink points to
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


359
360
361
362
363</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 359</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_current_release_version'>get_current_release_version</span>
  <span class='kw'>if</span> <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span><span class='lparen'>(</span><span class='id identifier rubyid_current_path'>current_path</span><span class='rparen'>)</span>
    <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='id identifier rubyid_get_current_release_path'>get_current_release_path</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_previous_version_numbers-instance_method">
  
    - (<tt>Array</tt>) <strong>get_previous_version_numbers</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Convenience method for returning just the version numbers of  the currently
installed versions of the artifact.
</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the currently installed version numbers
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


397
398
399</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 397</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_previous_version_numbers'>get_previous_version_numbers</span>
  <span class='id identifier rubyid_previous_version_paths'>previous_version_paths</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_version'>version</span><span class='op'>|</span> <span class='id identifier rubyid_version'>version</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_previous_version_paths-instance_method">
  
    - (<tt>Array</tt>) <strong>get_previous_version_paths</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Searches the releases directory and returns an Array of version folders.
After rejecting the current release version from the Array, the array is
sorted by mtime and returned.
</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the mtime sorted array of currently installed versions
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


383
384
385
386
387
388
389
390
391</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 383</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_previous_version_paths'>get_previous_version_paths</span>
  <span class='id identifier rubyid_versions'>versions</span> <span class='op'>=</span> <span class='const'>Dir</span><span class='lbracket'>[</span><span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_deploy_to'>deploy_to</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>releases</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>**</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
    <span class='const'>Pathname</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_versions'>versions</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='id identifier rubyid_get_current_release_version'>get_current_release_version</span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_versions'>versions</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:mtime</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_release_path-instance_method">
  
    - (<tt>String</tt>) <strong>get_release_path</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns a path to the artifact being installed by the configured resource.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code">When: 
  new_resource.deploy_to = &quot;/srv/artifact_test&quot; and artifact_version = &quot;1.0.0&quot;
    get_release_path =&gt; &quot;/srv/artifact_test/releases/1.0.0&quot;</pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the artifacts release path
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


374
375
376</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 374</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_release_path'>get_release_path</span>
  <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_deploy_to'>deploy_to</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>releases</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_artifact_version'>artifact_version</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_manifest_changed?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>has_manifest_changed?</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Loads the saved manifest.yaml file and generates a new, current manifest.
The saved manifest is then parsed through looking for files that may have
been deleted, added, or modified.
</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 312</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_manifest_changed?'>has_manifest_changed?</span>
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>active_support/core_ext/hash</span><span class='tstring_end'>'</span></span>

  <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[has_manifest_changed?] Loading manifest.yaml file from directory: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_release_path'>release_path</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_saved_manifest'>saved_manifest</span> <span class='op'>=</span> <span class='const'>YAML</span><span class='period'>.</span><span class='id identifier rubyid_load_file'>load_file</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_release_path'>release_path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>manifest.yaml</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOENT</span>
    <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[has_manifest_changed?] Cannot load manifest.yaml. It may have been deleted. Deploying.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span> <span class='kw'>true</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_current_manifest'>current_manifest</span> <span class='op'>=</span> <span class='id identifier rubyid_generate_manifest'>generate_manifest</span><span class='lparen'>(</span><span class='id identifier rubyid_release_path'>release_path</span><span class='rparen'>)</span>
  <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[has_manifest_changed?] Comparing saved manifest from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_release_path'>release_path</span><span class='rbrace'>}</span><span class='tstring_content'> with regenerated manifest from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_release_path'>release_path</span><span class='rbrace'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
  
  <span class='id identifier rubyid_differences'>differences</span> <span class='op'>=</span> <span class='op'>!</span><span class='id identifier rubyid_saved_manifest'>saved_manifest</span><span class='period'>.</span><span class='id identifier rubyid_diff'>diff</span><span class='lparen'>(</span><span class='id identifier rubyid_current_manifest'>current_manifest</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_differences'>differences</span>
    <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[has_manifest_changed?] Saved manifest from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_release_path'>release_path</span><span class='rbrace'>}</span><span class='tstring_content'> differs from regenerated manifest. Deploying.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span> <span class='kw'>true</span>
  <span class='kw'>else</span>
    <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[has_manifest_changed?] Saved manifest from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_release_path'>release_path</span><span class='rbrace'>}</span><span class='tstring_content'> is the same as regenerated manifest. Not Deploying.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="latest?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>latest?</strong>(version)  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Convenience method for determining whether a String is &#8220;latest&#8220;
</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>version</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the version of the configured artifact to check
</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
true when version matches (case-insensitive) &#8220;latest&#8220;
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


499
500
501</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 499</span>

<span class='kw'>def</span> <span class='id identifier rubyid_latest?'>latest?</span><span class='lparen'>(</span><span class='id identifier rubyid_version'>version</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_version'>version</span><span class='period'>.</span><span class='id identifier rubyid_casecmp'>casecmp</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>latest</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_current_resource-instance_method">
  
    - (<tt>Object</tt>) <strong>load_current_resource</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 39</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_current_resource'>load_current_resource</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_latest?'>latest?</span><span class='lparen'>(</span><span class='ivar'>@new_resource</span><span class='period'>.</span><span class='id identifier rubyid_version'>version</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_from_http?'>from_http?</span><span class='lparen'>(</span><span class='ivar'>@new_resource</span><span class='period'>.</span><span class='id identifier rubyid_artifact_location'>artifact_location</span><span class='rparen'>)</span>
    <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Application</span><span class='period'>.</span><span class='id identifier rubyid_fatal!'>fatal!</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You cannot specify the latest version for an artifact when attempting to download an artifact using http(s)!</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_chef_gem'>chef_gem</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>activesupport</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_version'>version</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3.2.11</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_from_nexus?'>from_nexus?</span><span class='lparen'>(</span><span class='ivar'>@new_resource</span><span class='period'>.</span><span class='id identifier rubyid_artifact_location'>artifact_location</span><span class='rparen'>)</span>
    <span class='words_beg'>%W{</span><span class='tstring_content'>libxml2-devel</span><span class='words_sep'> </span><span class='tstring_content'>libxslt-devel</span><span class='words_sep'>}</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_nokogiri_requirement'>nokogiri_requirement</span><span class='op'>|</span>
      <span class='id identifier rubyid_package'>package</span> <span class='id identifier rubyid_nokogiri_requirement'>nokogiri_requirement</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_action'>action</span> <span class='symbol'>:install</span>
      <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_run_action'>run_action</span><span class='lparen'>(</span><span class='symbol'>:install</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_chef_gem'>chef_gem</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nexus_cli</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
      <span class='id identifier rubyid_version'>version</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2.0.2</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_artifact_id'>artifact_id</span><span class='comma'>,</span> <span class='id identifier rubyid_extension'>extension</span> <span class='op'>=</span> <span class='ivar'>@new_resource</span><span class='period'>.</span><span class='id identifier rubyid_artifact_location'>artifact_location</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>:</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
    <span class='ivar'>@artifact_version</span> <span class='op'>=</span> <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Artifact</span><span class='period'>.</span><span class='id identifier rubyid_get_actual_version'>get_actual_version</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='comma'>,</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_artifact_id'>artifact_id</span><span class='comma'>,</span> <span class='ivar'>@new_resource</span><span class='period'>.</span><span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_extension'>extension</span><span class='rparen'>)</span>
    <span class='ivar'>@artifact_location</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_artifact_id'>artifact_id</span><span class='comma'>,</span> <span class='id identifier rubyid_artifact_version'>artifact_version</span><span class='comma'>,</span> <span class='id identifier rubyid_extension'>extension</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>:</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='ivar'>@artifact_version</span> <span class='op'>=</span> <span class='ivar'>@new_resource</span><span class='period'>.</span><span class='id identifier rubyid_version'>version</span>
    <span class='ivar'>@artifact_location</span> <span class='op'>=</span> <span class='ivar'>@new_resource</span><span class='period'>.</span><span class='id identifier rubyid_artifact_location'>artifact_location</span>
  <span class='kw'>end</span>

  <span class='ivar'>@release_path</span>             <span class='op'>=</span> <span class='id identifier rubyid_get_release_path'>get_release_path</span>
  <span class='ivar'>@current_path</span>             <span class='op'>=</span> <span class='ivar'>@new_resource</span><span class='period'>.</span><span class='id identifier rubyid_current_path'>current_path</span>
  <span class='ivar'>@shared_path</span>              <span class='op'>=</span> <span class='ivar'>@new_resource</span><span class='period'>.</span><span class='id identifier rubyid_shared_path'>shared_path</span>
  <span class='ivar'>@artifact_root</span>            <span class='op'>=</span> <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='ivar'>@new_resource</span><span class='period'>.</span><span class='id identifier rubyid_artifact_deploy_path'>artifact_deploy_path</span><span class='comma'>,</span> <span class='ivar'>@new_resource</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='ivar'>@version_container_path</span>   <span class='op'>=</span> <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='ivar'>@artifact_root</span><span class='comma'>,</span> <span class='id identifier rubyid_artifact_version'>artifact_version</span><span class='rparen'>)</span>
  <span class='ivar'>@current_release_path</span>     <span class='op'>=</span> <span class='id identifier rubyid_get_current_release_path'>get_current_release_path</span>
  <span class='ivar'>@previous_version_paths</span>   <span class='op'>=</span> <span class='id identifier rubyid_get_previous_version_paths'>get_previous_version_paths</span>
  <span class='ivar'>@previous_version_numbers</span> <span class='op'>=</span> <span class='id identifier rubyid_get_previous_version_numbers'>get_previous_version_numbers</span>
  <span class='ivar'>@manifest_file</span>            <span class='op'>=</span> <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='ivar'>@release_path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>manifest.yaml</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@deploy</span>                   <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@current_resource</span>         <span class='op'>=</span> <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Resource</span><span class='op'>::</span><span class='const'>ArtifactDeploy</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='ivar'>@new_resource</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>

  <span class='ivar'>@current_resource</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="manifest_differences?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>manifest_differences?</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Checks the various cases of whether an artifact has or has not been
installed. If the artifact has been installed let #has_manifest_changed?
determine the return value.
</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 284</span>

<span class='kw'>def</span> <span class='id identifier rubyid_manifest_differences?'>manifest_differences?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_force'>force</span>
    <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[manifest_differences?] Force attribute has been set for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
    <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[manifest_differences?] Installing version, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_artifact_version'>artifact_version</span><span class='rbrace'>}</span><span class='tstring_content'> for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span> <span class='kw'>true</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_get_current_release_version'>get_current_release_version</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[manifest_differences?] No current version installed for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
    <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[manifest_differences?] Installing version, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_artifact_version'>artifact_version</span><span class='rbrace'>}</span><span class='tstring_content'> for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span> <span class='kw'>true</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_artifact_version'>artifact_version</span> <span class='op'>!=</span> <span class='id identifier rubyid_get_current_release_version'>get_current_release_version</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_previous_version_numbers'>previous_version_numbers</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_artifact_version'>artifact_version</span><span class='rparen'>)</span>
    <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[manifest_differences?] Currently installed version of artifact is </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_get_current_release_version'>get_current_release_version</span><span class='rbrace'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
    <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[manifest_differences?] Version </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_artifact_version'>artifact_version</span><span class='rbrace'>}</span><span class='tstring_content'> for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbrace'>}</span><span class='tstring_content'> has not already been installed.</span><span class='tstring_end'>&quot;</span></span>
    <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[manifest_differences?] Installing version, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_artifact_version'>artifact_version</span><span class='rbrace'>}</span><span class='tstring_content'> for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span> <span class='kw'>true</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_artifact_version'>artifact_version</span> <span class='op'>!=</span> <span class='id identifier rubyid_get_current_release_version'>get_current_release_version</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_previous_version_numbers'>previous_version_numbers</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_artifact_version'>artifact_version</span><span class='rparen'>)</span>
    <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[manifest_differences?] Version </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_artifact_version'>artifact_version</span><span class='rbrace'>}</span><span class='tstring_content'> of artifact has already been installed.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span> <span class='id identifier rubyid_has_manifest_changed?'>has_manifest_changed?</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_artifact_version'>artifact_version</span> <span class='op'>==</span> <span class='id identifier rubyid_get_current_release_version'>get_current_release_version</span>
    <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[manifest_differences?] Currently installed version of artifact is </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_artifact_version'>artifact_version</span><span class='rbrace'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span> <span class='id identifier rubyid_has_manifest_changed?'>has_manifest_changed?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="retrieve_artifact!-instance_method">
  
    - (<tt>void</tt>) <strong>retrieve_artifact!</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>
Retrieves the configured artifact based on the artifact_location instance
variable.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


460
461
462
463
464
465
466
467
468
469
470
471
472</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 460</span>

<span class='kw'>def</span> <span class='id identifier rubyid_retrieve_artifact!'>retrieve_artifact!</span>
  <span class='id identifier rubyid_recipe_eval'>recipe_eval</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_from_http?'>from_http?</span><span class='lparen'>(</span><span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_artifact_location'>artifact_location</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_retrieve_from_http'>retrieve_from_http</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_from_nexus?'>from_nexus?</span><span class='lparen'>(</span><span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_artifact_location'>artifact_location</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_retrieve_from_nexus'>retrieve_from_nexus</span>
    <span class='kw'>elsif</span> <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_artifact_location'>artifact_location</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_retrieve_from_local'>retrieve_from_local</span>
    <span class='kw'>else</span>
      <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Application</span><span class='period'>.</span><span class='id identifier rubyid_fatal!'>fatal!</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[retrieve_artifact!] Cannot retrieve artifact </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_artifact_location'>artifact_location</span><span class='rbrace'>}</span><span class='tstring_content'>! Please make sure the artifact exists in the specified location.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="retrieve_from_http-instance_method">
  
    - (<tt>void</tt>) <strong>retrieve_from_http</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>
Defines a resource call for downloading the remote artifact.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


506
507
508
509
510
511
512
513
514
515
516</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 506</span>

<span class='kw'>def</span> <span class='id identifier rubyid_retrieve_from_http'>retrieve_from_http</span>
  <span class='id identifier rubyid_remote_file'>remote_file</span> <span class='id identifier rubyid_cached_tar_path'>cached_tar_path</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_source'>source</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_artifact_location'>artifact_location</span>
    <span class='id identifier rubyid_owner'>owner</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span>
    <span class='id identifier rubyid_group'>group</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span>
    <span class='id identifier rubyid_checksum'>checksum</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_artifact_checksum'>artifact_checksum</span>
    <span class='id identifier rubyid_backup'>backup</span> <span class='kw'>false</span>

    <span class='id identifier rubyid_action'>action</span> <span class='symbol'>:create</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="retrieve_from_local-instance_method">
  
    - (<tt>void</tt>) <strong>retrieve_from_local</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>
Defines a resource call for a file already on the file system.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


537
538
539
540
541
542
543</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 537</span>

<span class='kw'>def</span> <span class='id identifier rubyid_retrieve_from_local'>retrieve_from_local</span>
  <span class='id identifier rubyid_file'>file</span> <span class='id identifier rubyid_cached_tar_path'>cached_tar_path</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_content'>content</span> <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_artifact_location'>artifact_location</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span>
    <span class='id identifier rubyid_owner'>owner</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span>
    <span class='id identifier rubyid_group'>group</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="retrieve_from_nexus-instance_method">
  
    - (<tt>void</tt>) <strong>retrieve_from_nexus</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>
Defines a ruby_block resource call to download an artifact from Nexus.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


521
522
523
524
525
526
527
528
529
530
531
532</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 521</span>

<span class='kw'>def</span> <span class='id identifier rubyid_retrieve_from_nexus'>retrieve_from_nexus</span>
  <span class='id identifier rubyid_ruby_block'>ruby_block</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>retrieve from nexus</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_block'>block</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>nexus_cli</span><span class='tstring_end'>'</span></span>
      <span class='kw'>unless</span> <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span><span class='lparen'>(</span><span class='id identifier rubyid_cached_tar_path'>cached_tar_path</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='const'>Chef</span><span class='op'>::</span><span class='const'>ChecksumCache</span><span class='period'>.</span><span class='id identifier rubyid_checksum_for_file'>checksum_for_file</span><span class='lparen'>(</span><span class='id identifier rubyid_cached_tar_path'>cached_tar_path</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_artifact_checksum'>artifact_checksum</span>
        <span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Artifact</span><span class='period'>.</span><span class='id identifier rubyid_nexus_config_for'>nexus_config_for</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_remote'>remote</span> <span class='op'>=</span> <span class='const'>NexusCli</span><span class='op'>::</span><span class='const'>RemoteFactory</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='id identifier rubyid_config'>config</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_remote'>remote</span><span class='period'>.</span><span class='id identifier rubyid_pull_artifact'>pull_artifact</span><span class='lparen'>(</span><span class='id identifier rubyid_artifact_location'>artifact_location</span><span class='comma'>,</span> <span class='id identifier rubyid_version_container_path'>version_container_path</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="run_proc-instance_method">
  
    - (<tt>void</tt>) <strong>run_proc</strong>(name)  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>
A wrapper that adds debug logging for running a recipe_eval on the 
numerous Proc attributes defined for this resource.
</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the name of the proc to execute
</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225
226
227
228
229
230
231
232
233
234</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 223</span>

<span class='kw'>def</span> <span class='id identifier rubyid_run_proc'>run_proc</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_proc'>proc</span> <span class='op'>=</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_proc_name'>proc_name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[run_proc::</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_proc_name'>proc_name</span><span class='rbrace'>}</span><span class='tstring_content'>] Determining whether to execute </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_proc_name'>proc_name</span><span class='rbrace'>}</span><span class='tstring_content'> proc.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_proc'>proc</span>
    <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[run_proc::</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_proc_name'>proc_name</span><span class='rbrace'>}</span><span class='tstring_content'>] Beginning execution of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_proc_name'>proc_name</span><span class='rbrace'>}</span><span class='tstring_content'> proc.</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_recipe_eval'>recipe_eval</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_proc'>proc</span><span class='rparen'>)</span>
    <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[run_proc::</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_proc_name'>proc_name</span><span class='rbrace'>}</span><span class='tstring_content'>] Ending execution of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_proc_name'>proc_name</span><span class='rbrace'>}</span><span class='tstring_content'> proc.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[run_proc::</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_proc_name'>proc_name</span><span class='rbrace'>}</span><span class='tstring_content'>] Skipping execution of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_proc_name'>proc_name</span><span class='rbrace'>}</span><span class='tstring_content'> proc because it was not defined.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setup_deploy_directories!-instance_method">
  
    - (<tt>void</tt>) <strong>setup_deploy_directories!</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>
Creates directories that are necessary for installing the artifact.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


426
427
428
429
430
431
432
433
434
435
436
437</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 426</span>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_deploy_directories!'>setup_deploy_directories!</span>
  <span class='id identifier rubyid_recipe_eval'>recipe_eval</span> <span class='kw'>do</span>
    <span class='lbracket'>[</span> <span class='id identifier rubyid_version_container_path'>version_container_path</span><span class='comma'>,</span> <span class='id identifier rubyid_release_path'>release_path</span><span class='comma'>,</span> <span class='id identifier rubyid_shared_path'>shared_path</span> <span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span>
      <span class='id identifier rubyid_directory'>directory</span> <span class='id identifier rubyid_path'>path</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_owner'>owner</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span>
        <span class='id identifier rubyid_group'>group</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span>
        <span class='id identifier rubyid_mode'>mode</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>0755</span><span class='tstring_end'>'</span></span>
        <span class='id identifier rubyid_recursive'>recursive</span> <span class='kw'>true</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setup_shared_directories!-instance_method">
  
    - (<tt>void</tt>) <strong>setup_shared_directories!</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>
Creates directories that are defined in the shared_directories attribute of
the resource.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


443
444
445
446
447
448
449
450
451
452
453
454</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 443</span>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_shared_directories!'>setup_shared_directories!</span>
  <span class='id identifier rubyid_recipe_eval'>recipe_eval</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_shared_directories'>shared_directories</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dir'>dir</span><span class='op'>|</span>
      <span class='id identifier rubyid_directory'>directory</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_shared_path'>shared_path</span><span class='rbrace'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dir'>dir</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
        <span class='id identifier rubyid_owner'>owner</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span>
        <span class='id identifier rubyid_group'>group</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span>
        <span class='id identifier rubyid_mode'>mode</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>0755</span><span class='tstring_end'>'</span></span>
        <span class='id identifier rubyid_recursive'>recursive</span> <span class='kw'>true</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="symlink_it_up!-instance_method">
  
    - (<tt>void</tt>) <strong>symlink_it_up!</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>
Creates directories and symlinks as defined by the symlinks attribute of
the resource.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 405</span>

<span class='kw'>def</span> <span class='id identifier rubyid_symlink_it_up!'>symlink_it_up!</span>
  <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_symlinks'>symlinks</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='id identifier rubyid_directory'>directory</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_shared_path'>shared_path</span><span class='rbrace'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
      <span class='id identifier rubyid_owner'>owner</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span>
      <span class='id identifier rubyid_group'>group</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span>
      <span class='id identifier rubyid_mode'>mode</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>0755</span><span class='tstring_end'>'</span></span>
      <span class='id identifier rubyid_recursive'>recursive</span> <span class='kw'>true</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_link'>link</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_release_path'>release_path</span><span class='rbrace'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
      <span class='id identifier rubyid_to'>to</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_shared_path'>shared_path</span><span class='rbrace'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_owner'>owner</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span>
      <span class='id identifier rubyid_group'>group</span> <span class='id identifier rubyid_new_resource'>new_resource</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write_manifest-instance_method">
  
    - (<tt>String</tt>) <strong>write_manifest</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Generates a manfiest Hash for the files under the release_path and writes a
YAML dump of the created Hash to manifest_file.
</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
a String of the YAML dumped to the manifest.yaml file
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


565
566
567
568
569</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'providers/deploy.rb', line 565</span>

<span class='kw'>def</span> <span class='id identifier rubyid_write_manifest'>write_manifest</span>
  <span class='id identifier rubyid_manifest'>manifest</span> <span class='op'>=</span> <span class='id identifier rubyid_generate_manifest'>generate_manifest</span><span class='lparen'>(</span><span class='id identifier rubyid_release_path'>release_path</span><span class='rparen'>)</span>
  <span class='const'>Chef</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artifact_deploy[write_manifest] Writing manifest.yaml file to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_manifest_file'>manifest_file</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_manifest_file'>manifest_file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='const'>YAML</span><span class='period'>.</span><span class='id identifier rubyid_dump'>dump</span><span class='lparen'>(</span><span class='id identifier rubyid_manifest'>manifest</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Thu Jan 17 13:31:05 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.3 (ruby-1.9.2).
</div>

  </body>
</html>